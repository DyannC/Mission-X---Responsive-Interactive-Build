/* =========================================================
   FixIt — styles.css (ANNOTATED)
   Notes:
   - Comments explain intent and relationships.
   - No selectors/values were changed.
   - Safe to copy/paste over your existing file.
   ========================================================= */


/* ======== GLOBAL RESET ======== */
/* Basic reset + default font family across the app */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Inter", sans-serif;
}

/* ======== BODY LAYOUT ======== */
/* App-level body: vertical stack, centered content, forest wallpaper.
   We also enable smooth background transitions between themes. */
body {
  width: 100%;
  min-height: 100vh;
  display: flex;
  flex-direction: column; /* header on top, content below */
  align-items: center;
  background: url("images/forest.png") repeat-x bottom;
  background-color: #f0fddf;
  -webkit-transition: background-color 150ms ease-out !important;
  transition: background-color 150ms ease-out !important;
  background-size: auto;
  text-align: center;
  overflow-x: hidden;
}

/* Day theme token class (set via JS) */
body.day-background {
  background: #f0fddf url("images/forest.png") repeat-x bottom;
  background-size: auto;
  transition: background 1s ease-in-out, background-color 1s ease-in-out;
  color: #e0e0e0; /* note: main text color is later pinned via tokens */
}

/* Night theme token class (set via JS) */
body.night-background {
  background: #0b172a url("images/forest.png") repeat-x bottom;
  background-size: auto;
  transition: background 1s ease-in-out, background-color 1s ease-in-out;
  color: #e0e0e0; /* note: main text color is later pinned via tokens */
}

/* Night theme: default text elements get lighter color
   (we later override headings in page contexts for legibility). */
body.night-background h1,
body.night-background p,
body.night-background label {
  color: #d8eaff;
}

/* Night theme: input tokens */
body.night-background input {
  background-color: #F5F3EA;
  border-color: #444;
  color: #000000;
}

/* Input validation tokens (night) */
body.night-background input.error {
  border-color: #fd0000;
  border-width: 2px;
}

body.night-background input.valid {
  border-color: #4bd37b;
  border-width: 2px;
}

/* Night variant for a specific green CTA class */
body.night-background .btn-darkgreen {
  background: linear-gradient(100deg, #25463d, #0b3d2a);
  color: #d8eaff;
}


/* ======== THEME TOGGLE CLUSTER ======== */
/* Position the sun/moon + switch as a small cluster in header’s corner */
.button-con {
  position: absolute;
  top: 50px;         /* distance from top of the header */
  right: 50px;       /* distance from right edge */
  display: flex;     /* align icons + toggle in a row */
  align-items: center;
  gap: 10px;         /* spacing between icons and toggle */
  z-index: 1000;
}

/* Icons for day/night */
#dayIcon,
#nightIcon {
  width: 35px;
  height: 35px;
  cursor: pointer;
  fill: #f0c800;
  flex-shrink: 0;
  display: inline-block;
}

/* Accessibly hide the native checkbox; we style the visual switch instead */
.toggle {
  display: none;
}

/* Make sure all pseudo-elements adopt border-box sizing */
.toggle,
.toggle:after,
.toggle:before,
.toggle *,
.toggle *:after,
.toggle *:before,
.toggle+.toggle-button {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

/* Disable selection glow around the switch */
.toggle::-moz-selection,
.toggle:after::-moz-selection,
.toggle:before::-moz-selection,
.toggle *::-moz-selection,
.toggle *:after::-moz-selection,
.toggle *:before::-moz-selection,
.toggle+.toggle-button::-moz-selection {
  background: none;
}

.toggle::selection,
.toggle:after::selection,
.toggle:before::selection,
.toggle *::selection,
.toggle *:after::selection,
.toggle *:before::selection,
.toggle+.toggle-button::selection {
  background: none;
}

/* Visual switch track */
.toggle+.toggle-button {
  outline: 0;
  display: inline-block;
  width: 4em;
  height: 2em;
  position: relative;
  cursor: pointer;
  border: 2px solid #333; /* outer border (overridden below) */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Prepare internal half for the knob */
.toggle+.toggle-button:after,
.toggle+.toggle-button:before {
  position: relative;
  display: block;
  content: "";
  width: 50%;
  height: 100%;
}

/* Knob at left by default */
.toggle+.toggle-button:after {
  left: 0;
}

/* No second pseudo used */
.toggle+.toggle-button:before {
  display: none;
}

/* When toggled, push the knob to the right half */
.toggle:checked+.toggle-button:after {
  left: 50%;
}

/* Switch aesthetics: soft blue border + rounded track */
.toggle+.toggle-button {
  padding: 2px;
  -webkit-transition: all 0.2s ease;
  transition: all 0.2s ease;
  border: 2px solid rgba(0, 125, 249, 0.27);
  border-radius: 2em;
}

/* Knob fill and rounded shape */
.toggle+.toggle-button:after {
  -webkit-transition: all 0.2s ease;
  transition: all 0.2s ease;
  background: rgba(0, 128, 255, 0.27);
  content: "";
  border-radius: 1em;
}


/* ===== HEADER ===== */
/* 120px sticky header with logo left + toggle cluster on the right */
header {
  width: 100%;
  height: 120px;
  background-color: #FFFFFF;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 25px;
  margin-bottom: 1px;
}


/* ---------- COMMENTED-OUT “PHONE FRAME” (kept for reference)
   If you ever want a fixed-size frame again, these are ready.
   They’re disabled now to let pages fill the viewport. ----------

.stage { ... }
.stage::before { ... }
.screen { ... }
.screen--scroll { ... }

*/


/* ---------- TYPE & BASIC HELPERS ---------- */
/* Base H1 for subpages (homepage has its own hero typography) */
h1 {
  font-weight: 900;
  font-size: 22px;
  line-height: 1.2;
  text-align: center;
  margin: 5px 0 8px;
}

/* Default paragraph tone (overridden per theme where needed) */
p {
  color: #314d43;
}

/* Small utility classes */
.center { text-align: center; }
.mt8 { margin-top: 8px; }
.mt12 { margin-top: 12px; }
.mt16 { margin-top: 16px; }


/* ---------- BUTTONS ---------- */
/* Primary pill CTA (brand gradient + subtle inset highlights) */
.btn {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: 331px;
  height: 83px;
  padding: 15px;
  border: none;
  border-radius: 50px;
  background: linear-gradient(100deg, #48905F, #17552E);
  color: #edfdd9;
  font-size: 1.5rem;
  text-decoration: none;
  cursor: pointer;
  transition: 0.3s;
  border-radius: 50px;
  box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.4),
    inset -4px -4px 8px rgba(255, 255, 255, 0.2);
}

/* Hover: slight lift + scale; gradient animates via bg-position change */
.btn:hover {
  background-color: #48905f;
  color: #ffffff;
  background-position: right center; /* shifts gradient */
  transform: translateY(-3px) scale(1.03);
}

/* Active press feedback */
.btn:active {
  transform: translateY(1px) scale(.997);
}

/* Secondary ghost button (used in rails etc.) */
.btn-ghost {
  background: #FFFFFF;
  color: var(--text);
  border: 2px solid var(--border);
  box-shadow: none;
  border-radius: 9999px;
  width: 100%;
  box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.4),
    inset -4px -4px 8px rgba(255, 255, 255, 0.2);
}

/* Footer button rail: two buttons side by side */
.rail {
  display: flex;
  gap: 12px;
  padding: 0 4px;
}

.rail .btn {
  flex: 1 1 0;
  width: auto;
  max-width: none;
}

.center .btn {
  margin-left: auto;
  margin-right: auto;
}


/* ---------- CARDS & INPUTS ---------- */
/* Generic card surface */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: 0 18px 44px rgba(12, 31, 23, 0.1);
}

/* Standard inner page padding */
.pane { padding: 14px; }

/* Form controls */
input[type="text"],
input[type="email"],
textarea {
  width: 100%;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: #F5F4E9;
  color: var(--text);
  font: inherit;
}

textarea {
  min-height: 110px;
  resize: vertical;
}


/* ---------- ISSUE TILES (IssueType page) ---------- */
/* Responsive two-column grid of issue tiles */
.grid {
  display: grid;
  gap: 12px;
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

/* Each issue tile (A/Link or Block) */
.tile,
.tile:link,
.tile:visited {
  background: #F5F4E9;
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px 10px;
  text-align: center;
  display: grid;
  gap: 6px;
  place-items: center;
  box-shadow: 0 8px 18px rgba(12, 31, 23, 0.08);
  color: var(--text);
  text-decoration: none;
  min-height: 170px; /* consistent tile height */
}

/* Icon wrapper inside the tile */
.tile .icon {
  width: 96px;
  height: 96px;
  border-radius: 16px;
  background: var(--soft);
  border: 1px solid var(--border);
  display: grid;
  place-items: center;
  overflow: hidden;
  margin-bottom: 6px;
}

/* Icon image scales nicely inside the box */
.tile .icon img {
  max-width: 72%;
  max-height: 72%;
  object-fit: contain;
  display: block;
}

/* Tile label */
.tile strong { font-size: 13px; }

/* If the count is odd, center the last tile (keeps half width) */
.grid > .tile:last-child:nth-child(odd) {
  grid-column: 1 / span 2;
  justify-self: center;
  width: calc((100% - 12px) / 2);
}


/* ---------- PROGRESS REPORT CARDS (if used) ---------- */
.report-card {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  min-height: 110px;
  padding: 10px 16px;
  border-radius: 24px;
  border: 1px solid #f5f3e9;
  background: #f5f3ea;
  box-shadow: inset 3px 3px 6px rgba(0, 0, 0, .2), inset -3px -3px 6px rgba(255, 255, 255, .5);
  margin-bottom: 14px;
}

.report-card .icon { width: 80px; height: 80px; }
.report-card .label {
  flex: 1;
  text-align: left;
  margin-left: 10px;
  font-size: 1rem;
  font-weight: 600;
}

/* Status pills */
.status {
  padding: 6px 12px;
  border-radius: 20px;
  font-size: .8rem;
  font-weight: 800;
  color: #fff;
}

.status.received   { background: #808080; }
.status.in-progress{ background: #fdef85; color: #333; }
.status.resolved   { background: #558e4e; }


/* ---------- GENERIC OVERLAYS (upload / finding location) ---------- */
/* Full-screen dim layer + centered modal */
.overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, .18);
  display: grid;
  place-items: center;
  z-index: 2;
}

/* Modal surface */
.modal {
  width: 80%;
  max-width: 290px;
  background: #F5F4E9;
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: 0 18px 44px rgba(12, 31, 23, .18);
  padding: 16px;
}

.modal h2 {
  margin: 0 0 12px;
  font-size: 16px;
}

/* Two options row inside modal */
.option-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.option {
  background: var(--soft);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px;
  text-align: center;
}

/* Reusable loading spinner */
.spinner {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 6px solid var(--border);
  border-top-color: var(--g2);
  animation: spin 1s linear infinite;
  margin: 12px auto 8px;
}

@keyframes spin { to { transform: rotate(360deg); } }


/* ---------- MAP CARD (Location page) ---------- */
.map-card {
  padding: 0;
  height: 220px;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid var(--border);
  box-shadow: 0 18px 44px rgba(12, 31, 23, .1);
}

/* Leaflet container sizing */
#map { width: 100%; height: 100%; }

.leaflet-container { background: var(--soft); }
.leaflet-control-attribution { font-size: 10px; }


/* =========================================================
   HOME PAGE ONLY  (add class="home" to <body>)
   ========================================================= */

/* Two-row layout: hero grows; CTA row sits on bottom */
.home .stage {
  display: grid;
  grid-template-rows: 1fr auto;
}

/* Remove default stage bg; home has a custom hero composition */
.home .stage::before { display: none; }

/* Shared “ground” height (keeps forest + people aligned with CTA) */
.home { --cta-space: 118px; }

/* HERO container (isolation for layer blending) */
.home .hero {
  position: relative;
  isolation: isolate;
  padding: 18px 22px 0;
  min-height: 560px;
}

/* Soft glow at top behind the logo */
.home .hero::before {
  content: "";
  position: absolute;
  inset: 0 0 auto 0;
  height: 130px;
  background: radial-gradient(110% 60% at 50% 0, rgba(0, 0, 0, .07), transparent 60%);
  z-index: 1; /* below the logo */
}

/* Big centered logo (uses CSS background for crisp scaling) */
.home .logo {
  width: clamp(500px, 85%, 360px);   /* responsive width */
  aspect-ratio: 570 / 180;          /* keep proportions */
  margin: 6px auto 14px;
  background: var(--logo-url) left / contain no-repeat;
  position: relative;
  z-index: 5;
  filter:
    drop-shadow(0 10px 24px rgba(18, 68, 41, .16))
    drop-shadow(0 2px 4px rgba(18, 68, 41, .10));
}

/* Forest band fills hero; fades at top; tucks under CTA row */
.home .forest {
  width: 100%;
  max-width: 730px;
  position: absolute;
  bottom: var(--cta-space);
  inset: 0 0 calc(var(--cta-space) - 4px) 0; /* tuck under CTA */
  background: var(--forest-url) bottom center / cover no-repeat;
  z-index: 0;
  -webkit-mask-image: linear-gradient(to top, rgba(0, 0, 0, 1) 70%, rgba(0, 0, 0, 0) 100%);
  mask-image: linear-gradient(to top, rgba(0, 0, 0, 1) 70%, rgba(0, 0, 0, 0) 100%);
}

/* People art pinned to same ground level as forest.
   Centered horizontally and sized responsively. */
.home .people {
  position: absolute;
  height: 1000px;            /* visual scale (artwork-dependent) */
  bottom: var(--cta-space);
  left: 50%;
  transform: translateX(-50%);
  width: 86%;
  max-width: 330px;
  aspect-ratio: 1100 / 820;
  background: var(--people-url) bottom center / contain no-repeat;
  z-index: 0;
  filter:
    drop-shadow(0 14px 24px rgba(18, 68, 41, .12))
    drop-shadow(0 3px 10px rgba(18, 68, 41, .10));
}

/* Gentle seam blend between hero & CTA row */
.home .hero::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: calc(var(--cta-space) - 52px);
  height: 6px;
}

/* CTA row (button spans width) */
.home .cta {
  position: relative;
  padding: 16px 20px 20px;
  background: transparent;
}

/* Tiny blend strip to avoid hairlines between hero and CTA */
.home .cta::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: -22px;
  height: 22px;
  pointer-events: none;
}

/* CTA button in home fills the row for tap targets */
.home .cta .btn {
  width: 100%;
  height: 64px;
  border-radius: 32px;
}

/* Lift the button up slightly from the absolute ground */
.home { --cta-lift: 40px; }  /* try 8–16px for smaller lift */
.home .cta { margin-bottom: var(--cta-lift); }

/* Shorter screens: nudge sizes */
@media (max-height: 760px) {
  .home { --cta-space: 108px; }
  .home .people { width: 88%; }
}


/* ======== RESPONSIVE BREAKPOINTS ======== */
/* Mobile adjustments for common components (non-hero) */
@media (max-width: 768px) {
  .body {
    width: 95%;
    height: 85vh;
    padding: 1.5rem;
    border-radius: 25px;
  }

  .btn,
  .contact-form input {
    height: 60px;
    font-size: 1rem;
  }

  .report-card {
    flex-direction: column;
    height: auto;
    padding: 15px;
  }

  .report-card .icon {
    width: 70px;
    height: 70px;
    margin-bottom: 10px;
  }

  h1 { font-size: 1.8rem; }
}

/* Desktop scaling bump */
@media (min-width: 1200px) {
  .body {
    width: 100%;
    height: 95vh;
    padding: 2rem;
  }

  .btn,
  .contact-form input {
    font-size: 1.4rem;
    height: 75px;
  }

  .report-card { max-width: 480px; }
}


/* ========= Header + Theme (duplicated tokens kept for safety) ========= */
/* (Kept to match pages that rely on these exact selectors) */
header { width:100%; height:120px; background:#fff; display:flex; align-items:center; justify-content:space-between; padding:0 25px; }
.header-logo { height:90px; display:block; }
.button-con { position:absolute; top:50px; right:50px; display:flex; align-items:center; gap:10px; z-index:1000; }
.toggle { display:none; }
.toggle+.toggle-button { width:4em; height:2em; padding:2px; border:2px solid rgba(0,125,249,.27); border-radius:2em; cursor:pointer; display:inline-block; }
.toggle+.toggle-button:after { content:""; display:block; width:50%; height:100%; background:rgba(0,128,255,.27); border-radius:1em; transition:all .2s ease; }
.toggle:checked+.toggle-button:after { left:50%; position:relative; }
#dayIcon,#nightIcon{ width:35px; height:35px; cursor:pointer; }
body.day-background{ background:#f0fddf url("images/forest.png") repeat-x bottom; background-size:auto; color:#25463D; }
body.night-background{ background:#0b172a url("images/forest.png") repeat-x bottom; background-size:auto; color:#d8eaff; }

/* --- Keep app/content text stable across themes using tokens --- */
:root { --ink: #25463D; }

/* Constrain text color to tokens in key content areas */
main, .pane, .stage, .content, .page-wrap { color: var(--ink); }

main h1, main h2, main h3,
main p, main .lead,
.grid .tile strong,
label, .form label {
  color: var(--ink) !important;
}

/* Avoid forcing universal color on body in night mode.
   Content areas use tokens above for stability. */
body.night-background { color: inherit; }

/* Remove old global overrides by forcing inherit */
body.night-background h1,
body.night-background h2,
body.night-background p,
body.night-background label {
  color: inherit !important;
}

/* Sticky header + night adaptation */
header { background: #ffffff; position: sticky; top: 0; z-index: 1000; }
body.night-background header { background: #0e1b2f; }
body.night-background header .header-logo { filter: brightness(1.1) contrast(1.05); }


/* ===== SOLID INPUT / CARD UTILITIES (kill glass/blur/gradients) ===== */
.solid-input {
  background: #ffffff !important;
  background-image: none !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}
body.night-background .solid-input {
  background: #F5F3EA !important;
}

/* Theme tokens for surfaces/ink/border/shadow (day vs night) */
:root{
  --surface: #FFFFFF;
  --ink:     #25463D;
  --border:  #D9E8DA;
  --shadow:  0 6px 18px rgba(0,0,0,.08);
}

body.night-background{
  --surface: #F5F3EA;
  --ink:     #0B172A;
  --border:  #B9C9C0;
  --shadow:  0 6px 18px rgba(0,0,0,.25);
}

/* Solid input helper (apply to specific inputs like #coords when needed) */
.input-solid{
  background: var(--surface) !important;
  color: var(--ink) !important;
  border: 1.5px solid var(--border) !important;
  border-radius: 14px;
  padding: 14px 18px;
  width: 100%;
  box-shadow: var(--shadow);
  background-image: none !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}

/* Placeholder contrast helper */
.input-solid::placeholder{
  color: color-mix(in srgb, var(--ink) 60%, transparent);
}

/* Optional alignment for coordinates input */
.coords-row .input-solid,
#coords.input-solid{
  max-width: 720px;
  margin-inline: auto;
  display: block;
}

/* Solid card utility */
.card-solid{
  background: var(--surface) !important;
  border: 1.5px solid var(--border) !important;
  border-radius: 16px;
  box-shadow: var(--shadow);
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}

/* (Duplicate kept intentionally for pages that import subsets) */
.input-solid{
  background: var(--surface) !important;
  color: var(--ink) !important;
  border: 1.5px solid var(--border) !important;
  border-radius: 14px;
  padding: 14px 18px;
  width: 100%;
  box-shadow: var(--shadow);
  background-image: none !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}


/* ===== HEADING OVERRIDES / THEME-SAFE ===== */
/* Default day heading tone for generic pages */
h1 {
  color: #1a1a1a; /* dark green/black for readability in day mode */
  font-weight: 700;
  text-align: center;
}

/* Optional night override for global h1s */
body.night-background h1 { color: #f0f0f0; }

/* Issue page heading — force visible day & night, safe above backgrounds */
.pane h1,
.screen .pane h1 {
  color: #25463D !important;  /* deep green */
  font-weight: 900;
  line-height: 1.1;
  opacity: 1 !important;
  mix-blend-mode: normal !important;
  text-shadow: none !important;
  position: relative;  /* allow z-index */
  z-index: 2;          /* above any backgrounds */
}

/* Optional page-scoped heading color */
.issuetype h1 { color: #25463D !important; }

/* Night theme forcing lighter heading when needed */
body.night-background .pane h1,
body.night-background .issuetype h1 {
  color: #F2F7F4 !important;  /* light text on dark */
}

/* Ensure header sits above banners/content */
.fx-header { z-index: 10; }

/* Error banner used by your JS guards (IssueType/Details/Location) */
.error-banner{
  margin: 0 0 16px;
  padding: 12px 14px;
  border-radius: 12px;
  background: #ffe4e4;
  color: #7a1b1b;
  font-weight: 700;
  box-shadow: 0 6px 18px rgba(0,0,0,.08) inset;
}
