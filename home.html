<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FixIt — Home</title>

    <!-- Preconnects + web fonts used in your design -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

    <!--
      EARLY THEME BOOT: read saved theme (or OS preference) early
      and add the corresponding class to <body> before the page paints.
      This prevents a flash of the wrong theme on load.
    -->
    <script>
      (function () {
        var KEY = "fixit_theme";
        var mode = "day";
        try {
          var saved = localStorage.getItem(KEY);
          if (saved) {
            mode = saved;                           // use persisted choice
          } else if (
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches
          ) {
            mode = "night";                         // fall back to OS preference
          }
        } catch (e) {}                              // ignore private mode errors

        // Wait until <body> exists, then set the theme class
        function applyEarly() {
          var b = document.body;
          if (!b) { requestAnimationFrame(applyEarly); return; }
          b.classList.remove("day-background", "night-background");
          b.classList.add(mode === "night" ? "night-background" : "day-background");
        }
        applyEarly();
      })();
    </script>

    <!-- Your main stylesheet for this page (hero/layout rules live here) -->
    <link rel="stylesheet" href="homestyle.css" />
  </head>

  <body class="home">
    <!-- =========================================================
         Header: FixIt logo + accessible theme toggle (sun/switch/moon)
         ========================================================= -->
    <header>
      <!-- Brand logo (image only; navigation added elsewhere if needed) -->
      <a href="home.html" aria-label="Go to home">
      <img
        src="images/Fixit logo.png"
        alt="FixIt"
        class="header-logo"
        width="180"
        height="90"
        decoding="async"
      />
      </a> 

      <!-- Theme toggle control group -->
      <div class="button-con" role="group" aria-label="Theme toggle">
        <!-- Sun icon button (forces day mode) -->
        <button
          type="button"
          id="dayIcon"
          aria-label="Switch to day mode"
          style="background: none; border: 0; cursor: pointer; padding: 0"
        >
          <svg viewBox="0 0 35 35" width="35" height="35" aria-hidden="true">
            <path
              d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9 c0.414,0,0.789-0.168,1.06-0.439l-2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44 l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5 c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06 L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2 C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29 c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7 C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5 c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"
            />
          </svg>
        </button>

        <!-- The actual switch (screen-reader friendly) -->
        <input
          class="toggle"
          id="cb1"
          type="checkbox"
          role="switch"
          aria-label="Toggle dark mode"
          aria-checked="false"
        />
        <label class="toggle-button" for="cb1"></label>

        <!-- Moon icon button (forces night mode) -->
        <button
          type="button"
          id="nightIcon"
          aria-label="Switch to night mode"
          style="background: none; border: 0; cursor: pointer; padding: 0"
        >
          <svg viewBox="0 0 100 100" width="35" height="35" aria-hidden="true">
            <path
              d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"
            />
          </svg>
        </button>
      </div>
    </header>

    <!-- =========================================================
         HERO: two-column text + illustration pinned to bottom-right
         ========================================================= -->
    <main class="container hero">
      <div class="hero__wrap">
        <section>
          <h1>Let’s clean up our city</h1>
          <p class="lead">
            See a pothole, broken light, or dumping? Report it in minutes and
            help keep our neighborhoods cared-for.
          </p>
          <!-- Primary CTA -->
          <a class="btn" href="issuetype.html">Report an issue</a>
        </section>
      </div>

      <!-- Illustration positioned by CSS (below text, bottom-right) -->
      <img
        src="images/logohome.png"
        class="hero__art"
        alt="Community caring for the city"
      />
    </main>

    <!-- =========================================================
         THEME CONTROLLER: sync checkbox + icons + localStorage
         ========================================================= -->
    <script>
      (function () {
        const KEY = "fixit_theme";
        const body = document.body;
        const toggle = document.getElementById("cb1");
        const dayIcon = document.getElementById("dayIcon");
        const nightIcon = document.getElementById("nightIcon");

        // Apply a theme: set the body class, sync switch state/ARIA,
        // and persist the mode.
        function apply(mode) {
          const night = mode === "night";
          body.classList.remove("day-background", "night-background");
          body.classList.add(night ? "night-background" : "day-background");
          if (toggle) {
            toggle.checked = night;
            toggle.setAttribute("aria-checked", night ? "true" : "false");
          }
          try { localStorage.setItem(KEY, mode); } catch {}
        }

        // Initial mode (saved > OS)
        let saved = null;
        try { saved = localStorage.getItem(KEY); } catch {}
        if (!saved) {
          const prefersDark =
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches;
          saved = prefersDark ? "night" : "day";
        }
        apply(saved);

        // Wire up events: switch + sun + moon
        toggle?.addEventListener("change", () =>
          apply(toggle.checked ? "night" : "day")
        );
        dayIcon?.addEventListener("click", () => apply("day"));
        nightIcon?.addEventListener("click", () => apply("night"));
      })();
    </script>

    <!-- =========================================================
         HERO LEGIBILITY HELPER: force white text on dark theme
         (no style changes—just ensures readable hero text)
         ========================================================= -->
    <script>
      (function () {
        const BODY = document.body;
        const SEL = '.hero h1, .hero h2, .hero p, .hero .lead';

        function paintHeroText() {
          const dark = BODY.classList.contains('night-background');
          document.querySelectorAll(SEL).forEach(el => {
            // Ensure hero text contrasts with dark background
            el.style.setProperty('color', dark ? '#ffffff' : '#25463D', 'important');
            el.style.setProperty('text-shadow', dark ? '0 2px 6px rgba(0,0,0,.35)' : 'none', 'important');
          });
        }

        paintHeroText();                                                    // run now
        document.getElementById('cb1')?.addEventListener('change', paintHeroText);
        new MutationObserver(paintHeroText).observe(BODY, {                 // run if body class changes
          attributes: true, attributeFilter: ['class']
        });
        window.addEventListener('storage', paintHeroText);                  // run if theme is changed in another tab
      })();
    </script>
  </body>
</html>
